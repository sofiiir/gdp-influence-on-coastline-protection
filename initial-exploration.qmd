---
title: "initial-exploration"
format: html
---
# Initial exploration of coastline protection data against countries GDP
```{r}
# load in appropriate libraries
library(DescTools)
library(tidyverse)
```

## Addressing differences in names between gdp data and protected coastline data
```{r}
# use data from DescTools package to address 
country_names <- d.countries

# subset for only necessary columns
country_names <- country_names[, c('name', 'a3')]

country_names <- country_names |> 
   rename("iso_ter" = "a3")

```
Protected coastline data does not contain a year except for the mangrove data. For the purposes of this analysis, the assumption is that all of the data was last updated in 2016. 2016 GDP data will be used for consistency in the year. 
```{r}
# read in GDP data
gdp <- read_csv(here::here("data", "imf-dm-export-20251011.csv"))

# clean names for
gdp <-  janitor::clean_names(gdp)

# change column name to the same as the other dfs
gdp <- gdp |> 
   rename("name" = "gdp_per_capita_current_prices_u_s_dollars_per_capita")

# filter for only necessary 
gdp <- gdp[, c('name', 'x2016')]
```

```{r}
# read in coastline data
coastline <- read_csv(here::here("data", "Ocean+HabitatsDownload_Global", "coastline_coverage.csv"))

# join with country names
coastline <- full_join(coastline, country_names, by = 'iso_ter')
```

```{r}
# Read in coldwater coral data
coldwater_coral <- read_csv(here::here("data", "Ocean+HabitatsDownload_Global", "coldwatercorals.csv"))

coldwater_coral <- coldwater_coral |> 
   rename("iso_ter" = "ISO3")

# join with country names
coldwater_coral <- full_join(coldwater_coral, country_names, by = 'iso_ter')
```

```{r}
# Read in mangroves data
mangroves <- read_csv(here::here("data", "Ocean+HabitatsDownload_Global", "mangroves.csv"))

mangroves <- mangroves |> 
   rename("iso_ter" = "ISO3")

# join with country names
mangroves <- full_join(mangroves, country_names, by = 'iso_ter')
```

```{r}
# Read in salt marsh data
saltmarshes <- read_csv(here::here("data", "Ocean+HabitatsDownload_Global", "saltmarshes.csv"))

saltmarshes <- saltmarshes |> 
   rename("iso_ter" = "ISO3")

# join with country names
saltmarshes <- full_join(saltmarshes, country_names, by = 'iso_ter')
```

```{r}
# Read in sea grass data
seagrasses <- read_csv(here::here("data", "Ocean+HabitatsDownload_Global", "seagrasses.csv"))

seagrasses <- seagrasses |> 
   rename("iso_ter" = "ISO3")

# join with country names
seagrasses <- full_join(seagrasses, country_names, by = 'iso_ter')
```
```{r}
# Read in warm water corals data
warm_coral <- read_csv(here::here("data", "Ocean+HabitatsDownload_Global", "warmwatercorals.csv"))

warm_coral <- warm_coral |> 
   rename("iso_ter" = "ISO3") 

# join with country names
warm_coral <- full_join(warm_coral, country_names, by = 'iso_ter')
```

```{r}
str(coastline)
```
Make a graph showing any possible correlation of GDP to percent of protected mangroves. 
```{r}
# join mangrove and gdp data
mangroves_gdp <- full_join(mangroves, gdp, by = 'name')
```

We need to filter for only countries that have mangroves
```{r}
# look at the unique values for mangrove total area
unique(mangroves_gdp$total_area_2016)

# filter out - and NA for total area
 mangroves_gdp <- mangroves_gdp |> 
  filter((total_area_2016 != "-"), (total_area_2016 != "NA") )
```
Filter for countries with available GDP data for 2016.
```{r}
# filter out - and NA for total area
 mangroves_gdp <- mangroves_gdp |> 
  filter(!is.na(x2016) )
```

Almost none of the data from this data frame is numeric. Change the data type for those values needed to graph to numeric. 
```{r}
# GDP data has data type character
# change the gdp data to numeric
mangroves_gdp <- transform(mangroves_gdp, x2016 = as.numeric(x2016))

# change perecent protected to numeric
mangroves_gdp <- transform(mangroves_gdp, percent_protected = as.numeric(percent_protected))
```


Initial plot
```{r}
ggplot(data = mangroves_gdp, aes(x = x2016, y = percent_protected )) +
  geom_point(color = "forestgreen") +
  labs(x= "GDP",
       y = "Percent protected",
       title = "2016 Percent Protected Mangroves by GDP") +
  theme_classic()
```

