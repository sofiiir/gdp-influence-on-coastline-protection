---
title: "saltmarsh-gdp"
format: html
---

```{r}
# load in appropriate libraries
library(DescTools)
library(tidyverse)
```

## Address differences in names between gdp data and protected coastline data
```{r}
# use data from DescTools package to address 
country_names <- d.countries

# subset for only necessary columns
country_names <- country_names[, c('name', 'a3')]

country_names <- country_names |> 
   rename("iso_ter" = "a3")
```

```{r}
# read in GDP data
gdp <- read_csv(here::here("data", "imf-dm-export-20251011.csv"))

# clean names for
gdp <-  janitor::clean_names(gdp)

# change column name to the same as the other dfs
gdp <- gdp |> 
   rename("name" = "gdp_per_capita_current_prices_u_s_dollars_per_capita")

# filter for only necessary 
gdp <- gdp[, c('name', 'x2016')]
```

```{r}
# read in salt marsh data
saltmarshes <- read_csv(here::here("data", "Ocean+HabitatsDownload_Global", "saltmarshes.csv"))

saltmarshes <- saltmarshes |> 
   rename("iso_ter" = "ISO3")

# join with country names
saltmarshes <- full_join(saltmarshes, country_names, by = 'iso_ter')
```

Make a graph showing any possible correlation of GDP to percent of protected saltmarshes. 
```{r}
# join mangrove and gdp data
saltmarshes_gdp <- full_join(saltmarshes, gdp, by = 'name')
```

We need to filter for only countries that have salt marshes.
```{r}
#| output: false

# look at the unique values for mangrove total area
unique(saltmarshes_gdp$total_area)

# filter out - and NA for total area
saltmarshes_gdp <- saltmarshes_gdp |> 
  filter((total_area!= "-"), (total_area != "NA") )
```

Filter for countries with available GDP data for 2016.
```{r}
saltmarshes_gdp <- saltmarshes_gdp |> 
  filter(!is.na(x2016) )
```
Almost none of the data from this data frame is numeric. Change the data type for those values needed to graph to numeric. 
```{r}
# change the gdp data to numeric
saltmarshes_gdp <- transform(saltmarshes_gdp, x2016 = as.numeric(x2016))

# change percent protected to numeric
saltmarshes_gdp <- transform(saltmarshes_gdp, percent_protected = as.numeric(percent_protected))
```

Initial plot
```{r}
plot_saltmarshes <- ggplot(data = saltmarshes_gdp, aes(x = x2016, y = percent_protected )) +
  geom_point(color = "#273E47") +
  labs(x= "GDP",
       y = "Percent protected",
       title = "2016 Percent Protected Saltwater by GDP") +
  theme_classic()
```
